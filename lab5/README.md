# Лабараторная праца 5: Алгарытмы адсячэння адрэзкаў і мнагавугольнікаў

Праца выканана ў выглядзе інтэрактыўнай графічнай прылады для візуалізацыі і аналізу алгарытмаў адсячэння адрэзкаў і мнагавугольнікаў, напісанай на Python з выкарыстаннем бібліятэкі **PyQt6** для стварэння інтэрфейсу.

## 1. Апісанне праекта

Прылада прадстаўляе сабой інтэрактыўны плоцец для адлюстравання і адсячэння адрэзкаў і мнагавугольнікаў з выкарыстаннем розных алгарытмаў. Яна дазваляе:
*   Візуалізаваць працэс адсячэння
*   Параўноўваць вынікі розных метадаў
*   Аналізаваць матэматычныя разлікі
*   Працаваць з рознымі фарматамі ўваходных дадзеных
  
## 2. Рэалізаваныя алгарытмы

### 2.1. Частка 1: Алгарытмы адсячэння адрэзкаў прамавугольным вакном

**Алгарытм Ліяна-Барскі (варыянт 11)** – выкарыстоўвае параметрычнае заданне адрэзкаў.

`x = x₁ + t·dx, y = y₁ + t·dy, дзе t ∈ [0,1]`
`dx = x₂ - x₁, dy = y₂ - y₁`

Параметры `t` вызначаюцца для кожнай мяжы акна:

`t₁ = max(0, t_left, t_bottom)`
`t₂ = min(1, t_right, t_top)`

Дзе `t_left = (xmin - x₁)/dx`, `t_right = (xmax - x₁)/dx`, і аналагічна для `y`.

### 2.2. Частка 2: Алгарытмы адсячэння мнагавугольнікамі

**Алгарытм адсячэння выпуклага мнагавугольніка (Сазерленда-Ходжмана)** – для адсячэння суб'ект-мнагавугольніка выпуклым clip-мнагавугольнікам.

**Асноўныя крокі алгарытму:**
1.  Для кожнага боку clip-мнагавугольніка
2.  Праходзім па ўсіх кропках суб'ект-мнагавугольніка
3.  Правяраем становішча кропкі адносна боку
4.  Дадаем кропкі перасячэння пры неабходнасці

**Функцыя прыналежнасці кропкі:**

`is_inside = (x₂ - x₁)·(y - y₁) - (y₂ - y₁)·(x - x₁) ≥ 0`

## 3. Матэматычныя асновы

### 3.1. Алгарытм Ліяна-Барскі

Для адрэзка `(x₁,y₁)-(x₂,y₂)` і акна `(xmin,ymin)-(xmax,ymax)`:

`p = [-dx, dx, -dy, dy]`
`q = [x₁ - xmin, xmax - x₁, y₁ - ymin, ymax - y₁]`
Для кожнай мяжы `i`:
*   Калі `pᵢ = 0` і `qᵢ < 0` → адрэзак звонку
*   Калі `pᵢ < 0`: `t₁ = max(t₁, qᵢ/pᵢ)`
*   Калі `pᵢ > 0`: `t₂ = min(t₂, qᵢ/pᵢ)`

Калі `t₁ ≤ t₂`, адсечаны адрэзак:
`x₁' = x₁ + t₁·dx, y₁' = y₁ + t₁·dy`
`x₂' = x₁ + t₂·dx, y₂' = y₁ + t₂·dy`


### 3.2. Алгарытм выпуклага мнагавугольніка (Грэхема)

Для фарміравання выпуклай абалонкі з мноства кропак:

1.  Знаходзім самую ніжнюю кропку.
2.  Сартуем кропкі па палярным вуглу.
3.  Пабудоўваем абалонку з выкарыстаннем вектарнага здабытку.

**Вектарны здабытак для трох кропак:**

`cross(o, a, b) = (aₓ - oₓ)·(bᵧ - oᵧ) - (aᵧ - oᵧ)·(bₓ - oₓ)`

## 4. Тэхнічныя асаблівасці

### 4.1. Выкарыстаныя бібліятэкі
*   **PyQt6** – стварэнне графічнага інтэрфейсу
*   **Math** – матэматычныя вылічэнні

### 4.2. Асаблівасці рэалізацыі

**Інтэрактыўны інтэрфейс:**
*   Маштабаванне колесам мышы
*   Перацягванне прасторы ЛКМ
*   Скід маштабу і пазіцыі

**Візуалізацыя:**
*   Каардынатныя восі з сеткай
*   Рознакаляровая легенда
*   Інфармацыя пра маштаб і цэнтр

**Фарматы ўваходных файлаў:**
*   Для Ліяна-Барскі: адрэзкі + прамавугольнае вакно
*   Для мнагавугольніка: адрэзкі + выпуклы мнагавугольнік

**Аўтаматычны маштаб** – падбор маштабу паводле ўсіх кропак

### 4.3. Колеравая схема
*   **Чырвоны** – вакно адсячэння
*   **Сіні** – зыходныя адрэзкі
*   **Зялёны** – адсечаныя адрэзкі
*   **Аранжавы** – мнагавугольнік


## 5. Фарматы ўваходных файлаў

### 5.1. Для алгарытму Ліяна-Барскі
`n`
`x1₁ y1₁ x2₁ y2₁`
`x1₂ y1₂ x2₂ y2₂`
...
`x1ₙ y1ₙ x2ₙ y2ₙ`
`xmin ymin xmax ymax`

### 5.2. Для алгарытму мнагавугольніка
`n`
`x1₁ y1₁ x2₁ y2₁`
`x1₂ y1₂ x2₂ y2₂`
...
`x1ₙ y1ₙ x2ₙ y2ₙ`
`m`
`x₁ y₁`
`x₂ y₂`
...
`xₘ yₘ`

## 6. Запуск праграмы

### 6.1. Лакальны запуск
```bash
python main.py
```

### 6.2. Запуск з Docker (для Linux)
```bash
xhost +local:docker
docker pull jlcvuryj/lab5-clipping:latest
docker run -it --rm -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix jlcvuryj/lab5-clipping:latest
```
### Праграма даступная на DockerHub: jlcvuryj/lab5-clipping
